<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Plot Covid-19 Stripes — plot_covid19_stripes • tidycovid19</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Plot Covid-19 Stripes — plot_covid19_stripes" />
<meta property="og:description" content="Provides a flexible visualization of the country-level Covid-19 spread,
plotted by colored daily lines to generate a stripes display. Uses data
from the Johns Hopkins University CSSE team
(https://github.com/CSSEGISandData/COVID-19) and the World Bank
(https://data.worldbank.org)." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-119053376-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-119053376-1');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tidycovid19</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://www.github.com/joachim-gassen/tidycovid19">
    <span class="fa fa-github"></span>
     
    Code repository
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plot Covid-19 Stripes</h1>
    
    <div class="hidden name"><code>plot_covid19_stripes.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Provides a flexible visualization of the country-level Covid-19 spread,
plotted by colored daily lines to generate a stripes display. Uses data
from the Johns Hopkins University CSSE team
(<a href='https://github.com/CSSEGISandData/COVID-19'>https://github.com/CSSEGISandData/COVID-19</a>) and the World Bank
(<a href='https://data.worldbank.org'>https://data.worldbank.org</a>).</p>
    </div>

    <pre class="usage"><span class='fu'>plot_covid19_stripes</span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='fu'><a href='download_merged_data.html'>download_merged_data</a></span><span class='op'>(</span>cached <span class='op'>=</span> <span class='cn'>TRUE</span>, silent <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>,
  type <span class='op'>=</span> <span class='st'>"deaths"</span>,
  min_cases <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>per_capita</span>, <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>type</span> <span class='op'>==</span> <span class='st'>"deaths"</span>, <span class='fl'>5</span>, <span class='fl'>50</span><span class='op'>)</span>, <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>type</span> <span class='op'>==</span>
    <span class='st'>"deaths"</span>, <span class='fl'>1000</span>, <span class='fl'>10000</span><span class='op'>)</span><span class='op'>)</span>,
  cumulative <span class='op'>=</span> <span class='cn'>FALSE</span>,
  change_ave <span class='op'>=</span> <span class='fl'>7</span>,
  per_capita <span class='op'>=</span> <span class='cn'>FALSE</span>,
  population_cutoff <span class='op'>=</span> <span class='fl'>0</span>,
  diverging_color_scale <span class='op'>=</span> <span class='cn'>FALSE</span>,
  countries <span class='op'>=</span> <span class='cn'>NULL</span>,
  sort_countries <span class='op'>=</span> <span class='cn'>NULL</span>,
  data_date_str <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/format.html'>format</a></span><span class='op'>(</span><span class='fu'>lubridate</span><span class='fu'>::</span><span class='fu'><a href='https://lubridate.tidyverse.org/reference/as_date.html'>as_date</a></span><span class='op'>(</span><span class='va'>data</span><span class='op'>$</span><span class='va'>timestamp</span><span class='op'>[</span><span class='fl'>1</span><span class='op'>]</span><span class='op'>)</span>, <span class='st'>"%B %d, %Y"</span><span class='op'>)</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>The data frame to base the plot on. Should be a merged data
frame obtained by <a href='download_merged_data.html'>download_merged_data</a> and defaults to
<code><a href='download_merged_data.html'>download_merged_data(cached = TRUE, silent = TRUE)</a></code>.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>The statistic that you want to plot. Needs to be either
"confirmed", "deaths", "recovered" or "active", defined as the difference
of "confirmed", "deaths" and "recovered".</p></td>
    </tr>
    <tr>
      <th>min_cases</th>
      <td><p>Only countries that have a maximum of <code>type</code> cases higher
than <code>min_cases</code> during the data period are included in the plot.
Uses reasonable defaults depending on <code>type</code> and
<code>per_capita</code>.</p></td>
    </tr>
    <tr>
      <th>cumulative</th>
      <td><p>If <code>TRUE</code>, data is being plotted as
cumulative (showing the total figures). If <code>FALSE</code>, (the default)
(averaged) daily changes are plotted instead. See <code>change_ave</code>
to set the averaging window.</p></td>
    </tr>
    <tr>
      <th>change_ave</th>
      <td><p>Number of days to average over when you plot daily changes.</p></td>
    </tr>
    <tr>
      <th>per_capita</th>
      <td><p>If <code>TRUE</code> data is being plotted as per capita measure
based on World Bank data. Defaults to <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>population_cutoff</th>
      <td><p>Do you want to restrict the plot to countries that
exceed a certain population cutoff? Takes a value in millions and
defaults to 0. Useful for per capita displays.</p></td>
    </tr>
    <tr>
      <th>diverging_color_scale</th>
      <td><p>Should be set to <code>TRUE</code> when a <code>type</code>
is chosen that can have meaningful negative values (this is the case
for "active" cases). Defaults to <code>FALSE</code>.</p></td>
    </tr>
    <tr>
      <th>countries</th>
      <td><p>A character vector of ISO3c (ISO 3166-1 alpha-3) codes that
you want to include. Note that including many countries can lead to
long plotting times and might cause the plot to fail rendering when
the display is to small.</p></td>
    </tr>
    <tr>
      <th>sort_countries</th>
      <td><p>By default, countries are sorted alphabetically by
ISO3c code. "start" will sort countries by when they first exceeded
<code>min_cases</code>. "magnitude" will sort by decreasing maximum value
for <code>type</code>. "countries" requires <code>countries</code> to be set and
sorts the display in the order of the ISO3c codes provided.
Alternatively, you can recode the <code>iso3c</code> in
your data to a factor in the ordering that you prefer. See examples
below.</p></td>
    </tr>
    <tr>
      <th>data_date_str</th>
      <td><p>A date string to include in the annotation of the plot
giving the time when the data was pulled. Defaults to the timestamp of the
data. Note that you might run into issues with the default when running
this in a non-english locale. Consider setting it by hand then.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code><a href='https://ggplot2.tidyverse.org/reference/ggplot2-package.html'>ggplot2</a></code> oobject.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>plot_covid19_stripes</span><span class='op'>(</span><span class='op'>)</span>
</div><div class='img'><img src='plot_covid19_stripes-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='va'>merged</span> <span class='op'>&lt;-</span> <span class='fu'><a href='download_merged_data.html'>download_merged_data</a></span><span class='op'>(</span>cached <span class='op'>=</span> <span class='cn'>TRUE</span>, silent <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='fu'>plot_covid19_stripes</span><span class='op'>(</span><span class='va'>merged</span>, per_capita <span class='op'>=</span> <span class='cn'>TRUE</span>, population_cutoff <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Population data required. Observations for the following jurisdictions will be dropped as the World Bank is not providing population data for them:  AIA, ATA, BES, COK, ESH, FLK, GGY, JEY, MSR, TWN, VAT, WLF</span></div><div class='img'><img src='plot_covid19_stripes-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='fu'>plot_covid19_stripes</span><span class='op'>(</span><span class='va'>merged</span>,
  countries <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"ITA"</span>, <span class='st'>"ESP"</span>, <span class='st'>"FRA"</span>, <span class='st'>"DEU"</span>, <span class='st'>"USA"</span><span class='op'>)</span>,
  sort_countries <span class='op'>=</span> <span class='st'>"countries"</span>
<span class='op'>)</span>
</div><div class='img'><img src='plot_covid19_stripes-3.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='va'>sortdf</span> <span class='op'>&lt;-</span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://tibble.tidyverse.org/reference/tibble.html'>tibble</a></span><span class='op'>(</span>
  iso3c <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/unique.html'>unique</a></span><span class='op'>(</span><span class='va'>merged</span><span class='op'>$</span><span class='va'>iso3c</span><span class='op'>)</span>,
  continent <span class='op'>=</span> <span class='fu'>countrycode</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/countrycode/man/countrycode.html'>countrycode</a></span><span class='op'>(</span><span class='va'>iso3c</span>, <span class='st'>"iso3c"</span>, <span class='st'>"continent"</span><span class='op'>)</span>
<span class='op'>)</span> <span class='op'>%&gt;%</span> <span class='fu'>dplyr</span><span class='fu'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/arrange.html'>arrange</a></span><span class='op'>(</span><span class='va'>continent</span>, <span class='va'>iso3c</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: Some values were not matched unambiguously: ATA</span></div><div class='input'><span class='va'>df</span> <span class='op'>&lt;-</span> <span class='va'>merged</span>
<span class='va'>df</span><span class='op'>$</span><span class='va'>iso3c</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span><span class='op'>(</span><span class='va'>merged</span><span class='op'>$</span><span class='va'>iso3c</span>, <span class='va'>sortdf</span><span class='op'>$</span><span class='va'>iso3c</span><span class='op'>)</span>
<span class='fu'>plot_covid19_stripes</span><span class='op'>(</span><span class='va'>df</span>, type <span class='op'>=</span> <span class='st'>"confirmed"</span><span class='op'>)</span>
</div><div class='img'><img src='plot_covid19_stripes-4.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Joachim Gassen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


